<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delivery Manager Assignment</title>
    <style>
        /* Same styles as before */
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            color: #333333;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #00b388;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 8px;
            margin: 5px 0 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .radio-group {
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #ffffff;
        }
        .radio-group label {
            display: inline;
            margin-right: 15px;
            font-weight: bold;
            color: #555;
        }
        .radio-options label {
            font-weight: normal;
            margin: 0 10px 0 0;
        }
        button {
            background-color: #00b388;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #007a5e;
        }
        .result {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #e0f7fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Early engagement & DO Delivery Manager Assignment</h1>
        <form id="assignmentForm">

            <label for="country">Account Country</label>
            <select id="country" name="country" required>
                <option value="" disabled selected>-- Select Country --</option>
                <option value="Switzerland">Switzerland</option>
                <option value="Austria">Austria</option>
                <option value="Germany">Germany</option>
                <option value="Poland">Poland</option>
                <option value="Hungary">Hungary</option>
                <option value="Turkey">Turkey</option>
                <option value="Czech Republic">Czech Republic</option>
                <option value="Slovakia">Slovakia</option>
                <option value="Romania">Romania</option>
            </select>

            <div id="radioFields" style="display: none;">
                <div class="radio-group">
                    <label>Greenlake / OS</label>
                    <div class="radio-options">
                        <input type="radio" id="greenlakeYes" name="greenlake" value="yes" required>
                        <label for="greenlakeYes">Yes</label>
                        <input type="radio" id="greenlakeNo" name="greenlake" value="no" required>
                        <label for="greenlakeNo">No</label>
                    </div>
                </div>

                <div class="radio-group">
                    <label>Managed Services</label>
                    <div class="radio-options">
                        <input type="radio" id="managedYes" name="managed" value="yes" required>
                        <label for="managedYes">Yes</label>
                        <input type="radio" id="managedNo" name="managed" value="no" required>
                        <label for="managedNo">No</label>
                    </div>
                </div>

                <div class="radio-group">
                    <label>A&PS</label>
                    <div class="radio-options">
                        <input type="radio" id="apsYes" name="aps" value="yes" required>
                        <label for="apsYes">Yes</label>
                        <input type="radio" id="apsNo" name="aps" value="no" required>
                        <label for="apsNo">No</label>
                    </div>
                </div>
            </div>

            <div id="germanyFields" style="display: none;">

                <div id="tcvGroup" class="radio-group" style="display: none;">
                    <label>TCV > 5 Mio?</label>
                    <div class="radio-options">
                        <input type="radio" id="tcvYes" name="tcv" value="yes">
                        <label for="tcvYes">Yes</label>
                        <input type="radio" id="tcvNo" name="tcv" value="no">
                        <label for="tcvNo">No</label>
                    </div>
                </div>

                <label for="plz">PLZ (shipping address)</label>
                <input type="number" id="plz" name="plz">

                <div class="radio-group">
                    <label>Top Account</label>
                    <div class="radio-options">
                        <input type="radio" id="topAccountYes" name="topAccount" value="yes">
                        <label for="topAccountYes">Yes</label>
                        <input type="radio" id="topAccountNo" name="topAccount" value="no">
                        <label for="topAccountNo">No</label>
                    </div>
                </div>

                <div id="topfields" style="display: none;">
                    <label for="topcomp">Please select top account from the list below:</label>
                    <select id="topcomp" name="topcomp">
                        <option value="" disabled selected>-- Select Account --</option>
                        <option value="Airbus">Airbus</option>
                        <option value="BASF">BASF</option>
                        <option value="BKA">BKA</option>
                        <option value="BMW">BMW</option>
                        <option value="BitBW">BitBW</option>
                        <option value="Deutsche Bank">Deutsche Bank</option>
                        <option value="Deutsche Börse">Deutsche Börse</option>
                        <option value="Infosys/Daimler">Infosys/Daimler</option>
                        <option value="SAP">SAP</option>
                        <option value="Siemens">Siemens</option>
                        <option value="Telefonica">Telefonica</option>
                        <option value="Volkswagen">Volkswagen</option>
                        <option value="Vodafone">Vodafone</option>
                        <option value="Witron">Witron</option>
                    </select>
                </div>

                <div class="radio-group">
                    <label>Automotive segment?</label>
                    <div class="radio-options">
                        <input type="radio" id="automotiveYes" name="automotive" value="yes">
                        <label for="automotiveYes">Yes</label>
                        <input type="radio" id="automotiveNo" name="automotive" value="no">
                        <label for="automotiveNo">No</label>
                    </div>
                </div>

                <div class="radio-group">
                    <label>SAP services?</label>
                    <div class="radio-options">
                        <input type="radio" id="sapYes" name="sap" value="yes" required>
                        <label for="sapYes">Yes</label>
                        <input type="radio" id="sapNo" name="sap" value="no" required>
                        <label for="sapNo">No</label>
                    </div>
                </div>
            
                <!-- Colo Field -->
                <div class="radio-group">
                    <label>Only PM or only Colo?</label>
                    <div class="radio-options">
                        <input type="radio" id="coloYes" name="colo" value="yes" required>
                        <label for="coloYes">Yes</label>
                        <input type="radio" id="coloNo" name="colo" value="no" required>
                        <label for="coloNo">No</label>
                    </div>
                </div>

            </div>

            <button type="submit">Check</button>
            <button type="reset">Clear</button>
        </form>

        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script>
     function toggleFields() {
    const country = document.getElementById('country').value;
    const germanyFields = document.getElementById('germanyFields');
    const radioFields = document.getElementById('radioFields');
    const topfields = document.getElementById('topfields');
    const greenlakeInputs = document.getElementsByName('greenlake');
    const managedInputs = document.getElementsByName('managed');
    const apsInputs = document.getElementsByName('aps');
    const sapInputs = document.getElementsByName('sap');
    const coloInputs = document.getElementsByName('colo');
    const tcvInputs = document.getElementsByName('tcv');

    // Default: hide all additional fields
    radioFields.style.display = 'none';
    germanyFields.style.display = 'none';
    topfields.style.display = 'none';
   
    // Remove the 'required' attribute from all radio inputs by default
    [...greenlakeInputs, ...managedInputs, ...apsInputs, ...sapInputs, ...coloInputs, ...tcvInputs].forEach(input => input.required = false);

    // Show service fields for Germany, Switzerland, and Austria
    if (country === 'Germany' || country === 'Austria' || country === 'Switzerland') {
        radioFields.style.display = 'block';

        // Add 'required' attribute back for visible fields
        greenlakeInputs.forEach(input => input.required = true);
        managedInputs.forEach(input => input.required = true);
        apsInputs.forEach(input => input.required = true);

        if (country === 'Germany') {
            germanyFields.style.display = 'block'; // Show Germany-specific fields
            [...sapInputs, ...coloInputs].forEach(input => input.required = true);
        }
    }

    document.querySelectorAll('input[name="topAccount"]').forEach(radio => {
        radio.addEventListener('change', () => {
            if (radio.value === 'yes' && radio.checked) {
                topfields.style.display = 'block'; // Show dropdown
                document.getElementById('topcomp').required = true; // Make dropdown required
            } else {
                topfields.style.display = 'none'; // Hide dropdown
                document.getElementById('topcomp').required = false; // Remove required attribute
            }
        });
    });

    document.querySelectorAll('input[name="aps"]').forEach(radio => {
        radio.addEventListener('change', () => {
            if (radio.value === 'yes' && radio.checked && country == 'Germany') {
                tcvGroup.style.display = 'block'; // Show TCV group
                tcvInputs.forEach(input => input.required = true); // Make TCV required
            } else {
                tcvGroup.style.display = 'none'; // Hide TCV group
                tcvInputs.forEach(input => input.required = false); // Remove required attribute
            }
        });
    });

}
        
        // Add event listener for changes in the country dropdown
        document.getElementById('country').addEventListener('change', toggleFields);
        
        // Initial check on page load
        document.addEventListener('DOMContentLoaded', toggleFields);
    
        // Form submission handler
        document.getElementById('assignmentForm').addEventListener('submit', function (event) {
            event.preventDefault(); 
    
            
            const form = event.target;
            const country = form.country.value;
            const greenlake = form.greenlake?.value === 'yes';
            const managed = form.managed?.value === 'yes';
            const aps = form.aps?.value === 'yes';
            const plz = form.plz.value ? parseInt(form.plz.value) : null;
            const topAccount = form.topAccount?.value === 'yes';
            const automotive = form.automotive?.value === 'yes';
            const sap = form.sap?.value === 'yes';
            const colo = form.colo?.value === 'yes';

            console.log({
                country,
                greenlake,
                managed,
                aps,
                plz,
                topAccount,
                automotive,
                sap,
                colo,
            });
    
            let managers = [];
            let earlyEngagementContact = []; 
    
            // Assignment logic
            if (country === 'Poland') {
          managers = ['Izabella Skobudzinska'];
    } else if (country === 'Hungary') {
          managers = ['Robert Szugyiczki'];
    } else if (country === 'Turkey') {
          managers = ['Nilufer Girgin'];
    } else if (country === 'Czech Republic') {
          managers = ['Milan Skolil'];
    } else if (country === 'Slovakia') {
          managers = ['Milon Micka'];
    } else if (country === 'Romania') {
          managers = ['Razvan Tesiu'];
    } else if (country === 'Switzerland') {
        if (greenlake) {
            managers.push('Stefan Gisler', 'Mario Grande'); 
        }  
        if (aps) {
            managers.push('Ramtin Razzaghinejad');
        } 
        if (managed) {
            managers.push('ITOC');
        } 

    } else if (country === 'Austria') {
        if (greenlake) {
            managers.push('Rudolf Mueller', 'Ernst Krammer');
        } 
        if (aps) {
            managers.push('Gerald Six');
        }
        if (managed) {
            managers.push('ITOC');
        } 

    } else if (country === 'Germany') {
        if (greenlake) {
            if (
                (plz >= 0 && plz <= 38999) ||
                (plz >= 49000 && plz <= 49999) ||
                (plz >= 54000 && plz <= 56999) ||
                (plz >= 60000 && plz <= 65999) ||
                (plz >= 98000 && plz <= 99999)
            ) {
                managers.push('Steffi Dollase');
            } else if (
                (plz >= 40000 && plz <= 48999) ||
                (plz >= 50000 && plz <= 53999) ||
                (plz >= 57000 && plz <= 59999)
            ) {
                managers.push('Sabine Warta');
            } else if (
                (plz >= 66000 && plz <= 69999) ||
                (plz >= 70000 && plz <= 79999) ||
                (plz >= 80000 && plz <= 89999) ||
                (plz >= 90000 && plz <= 97999)
            ) {
                managers.push('Alexander Butter');
            }
        } 
        if (aps) {
            if (
                (plz >= 0 && plz <= 38999) ||
                (plz >= 49000 && plz <= 49999) ||
                (plz >= 54000 && plz <= 56999) ||
                (plz >= 60000 && plz <= 65999) ||
                (plz >= 98000 && plz <= 99999)
            ) {
                managers.push('Markus Trojahn');
            } else if (
                (plz >= 40000 && plz <= 48999) ||
                (plz >= 50000 && plz <= 53999) ||
                (plz >= 57000 && plz <= 59999)
            ) {
                managers.push('Ina Heger');
            } else if (
                (plz >= 66000 && plz <= 69999) ||
                (plz >= 70000 && plz <= 79999) ||
                (plz >= 80000 && plz <= 89999) ||
                (plz >= 90000 && plz <= 97999)
            ) {
                managers.push('Patrick Neff');
            }
        }
        
        if (managed) {
            managers.push('ITOC');
        } 
        if (topAccount) {
            managers.push('Robbert Moeller');
        }
        if (aps && automotive) {
            managers.push('Markus Depolt');
        }
        if (sap) {
            managers.push('Patrick Neff');
            earlyEngagementContact.push('Patrick Neff');
        }
        if ((colo && aps) || (tcv && aps)) {
            if ((plz >= 0 && plz <= 38999) ||
                (plz >= 49000 && plz <= 49999) ||
                (plz >= 54000 && plz <= 56999) ||
                (plz >= 60000 && plz <= 65999) ||
                (plz >= 98000 && plz <= 99999) ||
                (plz >= 40000 && plz <= 48999) ||
                (plz >= 50000 && plz <= 53999) ||
                (plz >= 57000 && plz <= 59999)) {
                    earlyEngagementContact.push('Gerald');
                } else if ((plz >= 66000 && plz <= 69999) ||
                            (plz >= 70000 && plz <= 79999) ||
                            (plz >= 80000 && plz <= 89999) ||
                            (plz >= 90000 && plz <= 97999)) {
                                earlyEngagementContact.push('Alina');
                            }
        }
    }
            
            // Display results
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';

            if (managers.length > 0 || earlyEngagementContact) {
                let resultHTML = '';

                // Add Assigned Delivery Managers if available
                if (managers.length > 0) {
                    resultHTML += `<strong>Delivery Managers:</strong> ${managers.join(', ')}<br>`;
                } else {
                    resultHTML += `<strong>Delivery Managers:</strong> No managers found for the provided details.<br>`;
                }

                // Add Early Engagement Contact if available
                if (earlyEngagementContact.length>0) {
                    resultHTML += `<strong>Early Engagement:</strong> ${earlyEngagementContact}<br>`;
                }

                resultDiv.innerHTML = resultHTML;
            } else {
                resultDiv.innerHTML = 'No relevant information found for the provided details.';
            }

        });
    </script>
    </body>
</html>

